<Page xmlns="http://schemas.nativescript.org/tns.xsd" navigatingTo="navigatingTo" class="page" actionBarHidden="true">
    <StackLayout class="p-20 form" row="1">

        <Label text="Add new expense" class="h1 text-center"/>
        <TextField
                id="name" class="input" text="{{ expenseViewModel.name }}" hint="Name"
                returnKeyType="next" returnPress="focusAmount"
                autocorrect="true" autocapitalizationType="none"
                row="0"
                color="black"/>
        <TextField id="amount" class="input" secure="false" text="{{ expenseViewModel.amount, expenseViewModel.amount | numberConverter }}" hint="Amount"
                   returnKeyType="next" returnPress="focusTags"
                   row="1" keyboardType="number"
                   color="black"/>

        <!--TODO add a selector for currency-->
        <!-- TODO make the tags span a single line and scroll when line is overflown -->
        <WrapLayout orientation="vertical" class="tag-container">

            <!--<Label class='label' text="Tags:"/>-->

            <WrapLayout orientation="horizontal" class="input-field">

                <Repeater items="{{ expenseViewModel.tagsHandler.tagNamesObservable }}">
                    <Repeater.itemsLayout>
                        <WrapLayout orientation="horizontal"/>
                    </Repeater.itemsLayout>

                    <Repeater.itemTemplate>
                        <WrapLayout orientation="horizontal" class="single-tag-container">
                            <Label text="{{ $value }}" class="tag-text"/>
                            <Label text="x" class="tag-delete-btn bg-danger" ontap="delete_tag"/>
                        </WrapLayout>

                    </Repeater.itemTemplate>
                </Repeater>

            </WrapLayout>
            <WrapLayout orientation="horizontal" id="add-tag-container">
                <TextField class="input" id="add-tag-text" hint="Add tag..." returnPress="add_tag"/>
                <Button text="+" id="add-tag-btn" class="btn" tap="add_tag"/>
            </WrapLayout>
        </WrapLayout>

        <button text="Add expense" id="submit-button" class="btn btn-primary" tap="submit" verticalAlignment="bottom"/>

    </StackLayout>

</Page>
